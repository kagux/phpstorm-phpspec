<idea-plugin version="2">
  <id>pl.projectspace.idea.plugins.php.phpspec</id>
  <name>phpspec</name>
  <version>0.1</version>
  <vendor email="michal@przytulski.pl" url="http://mprzytulski.github.io/phpstorm-phpspec">Michal Przytulski</vendor>

  <description><![CDATA[
      phpspec support for PhpStorm IDE.

      <h3>General:</h3>
      <ul>
          <li>Custom icon for Behat Context and PageObjects files</li>
      </ul>

      <h3>Feature file:</h3>
      <ul>
          <li>tag auto completion</li>
          <li>reference provider for Gherkin steps</li>
      </ul>
      ]]></description>

  <change-notes><![CDATA[
      <h3>0.2</h3>
      <ul>
          <li>detecting Behat installation</li>
      </ul>
      ]]>
  </change-notes>

  <idea-version since-build="129.757"/>


  <application-components>
    <!-- Add your application components here -->
  </application-components>

  <project-components>
    <component>
      <implementation-class>pl.projectspace.idea.plugins.php.phpspec.PhpSpecProject</implementation-class>
    </component>
  </project-components>

  <actions>
      <group class="pl.projectspace.idea.plugins.php.phpspec.actions.PhpSpec" id="PhpSpecGroup" text="phpspec" description="phpspec actions" popup="true">
          <action id="InitialiseProject" class="pl.projectspace.idea.plugins.php.phpspec.actions.InitialiseProject"
                  text="Enable phpspec support for this project">
          </action>
          <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
      </group>
      <action id="CreateSpecForClass" class="pl.projectspace.idea.plugins.php.phpspec.actions.CreateSpecForClass"
              text="Create spec for class">
          <add-to-group group-id="GenerateGroup" anchor="last"/>
      </action>
      <action id="OpenSpecForClass" class="pl.projectspace.idea.plugins.php.phpspec.actions.PhpSpecSwitchContext"
              icon="/icons/phpspec.png"
              text="Go to class spec">
          <add-to-group group-id="GoToMenu" anchor="last"/>
          <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
          <add-to-group group-id="EditorActions" anchor="last"/>
          <!--<add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>-->
          <keyboard-shortcut keymap="$default" first-keystroke="alt meta S"/>
      </action>
  </actions>


  <extensions defaultExtensionNs="com.intellij">
      <internalFileTemplate name="Spec Class" />

      <projectConfigurable instance="pl.projectspace.idea.plugins.php.phpspec.SettingsForm"/>

      <php.typeProvider2 implementation="pl.projectspace.idea.plugins.php.phpspec.code.type.provider.WrappedObjectTypeProvider"/>

      <completion.contributor language="PHP" implementationClass="pl.projectspace.idea.plugins.php.phpspec.code.SpecCompletionContributor"/>
      <!--<pl.projectspace.idea.plugins.commons.php.psi.referenceContributor implementation="pl.projectspace.idea.plugins.php.phpspec.core.SpecReferenceContributor"/>-->

      <projectService serviceImplementation="pl.projectspace.idea.plugins.php.phpspec.Settings"/>
      <projectService serviceImplementation="pl.projectspace.idea.plugins.php.phpspec.command.Locator" />
      <projectService serviceImplementation="pl.projectspace.idea.plugins.php.phpspec.command.Executor" />

      <fileIconProvider implementation="pl.projectspace.idea.plugins.php.phpspec.core.SpecFileIconProvider" />

      <!--<nameSuggestionProvider implementation="pl.projectspace.idea.plugins.php.phpspec.core.SpecNameSuggestionProvider" id="PHP"/>-->
      <!--<definitionsSearch implementation="com.jetbrains.php.lang.findUsages.PhpDefinitionsSearchExecutor"/>-->
      <!--<typedHandler implementation="pl.projectspace.idea.plugins.php.phpspec.core.SpecTypeHandler"/>-->
      <!--<inlineActionHandler implementation="pl.projectspace.idea.plugins.php.phpspec.core.SpecInlineVariableHandler" />-->
  </extensions>

  <depends>com.jetbrains.php</depends>
  <depends>com.intellij.modules.platform</depends>
  <depends>org.jetbrains.plugins.yaml</depends>

</idea-plugin>